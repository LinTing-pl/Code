<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Document</title>
    <script src="./JS/vue3.js"></script>
    <script src="./JS/vue-router.global.js"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <style>
      #app-vue {
        border: solid 1px plum;
      }
    </style>
  </head>
  <body>
    <div id="app-vue">
      <ul>
        <li>
          <router-link to="/">1</router-link>
        </li>
        <li>
          <router-link to="/about">2</router-link>
        </li>
      </ul>
      <router-view></router-view>
    </div>
    <div id="app-react"></div>
  </body>
  <!-- Vue -->
  <script>
    const Home = { template: "<div>Home</div>" };
    const About = { template: "<div>About</div>" };
    const routes = [
      { path: "/", component: Home },
      { path: "/about", component: About },
    ];
    const router = VueRouter.createRouter({
      history: VueRouter.createWebHashHistory(),
      routes,
    });
    const appVue = Vue.createApp({});
    appVue.use(router);
    appVue.mount("#app-vue");
  </script>
  <!-- React -->
  <script type="text/babel">
    const scaleNames = {
      c: "Celsius",
      f: "Fahrenheit",
    };
    function BoilingVerdict(props) {
      if (props.celsius >= 100) {
        return <p>The water would boil.</p>;
      }
      return <p>The water would not boil.</p>;
    }
    function toCelsius(fahrenheit) {
      return ((fahrenheit - 32) * 5) / 9;
    }

    function toFahrenheit(celsius) {
      return (celsius * 9) / 5 + 32;
    }
    function tryConvert(temperature, convert) {
      const input = parseFloat(temperature);
      if (Number.isNaN(input)) {
        return "";
      }
      const output = convert(input);
      const rounded = Math.round(output * 1000) / 1000;
      return rounded.toString();
    }
    class TemperatureInput extends React.Component {
      constructor(props) {
        super(props);
        this.handleChange = this.handleChange.bind(this);
      }

      handleChange(e) {
        this.props.onTemperatureChange(e.target.value);
      }

      render() {
        const temperature = this.props.temperature;
        const scale = this.props.scale;
        return (
          <fieldset>
            <legend>Enter temperature in {scaleNames[scale]}:</legend>
            <input value={temperature} onChange={this.handleChange} />
          </fieldset>
        );
      }
    }
    class Calculator extends React.Component {
      constructor(props) {
        super(props);
        this.handleCelsiusChange = this.handleCelsiusChange.bind(this);
        this.handleFahrenheitChange = this.handleFahrenheitChange.bind(this);
        this.state = { temperature: "", scale: "c" };
      }

      handleCelsiusChange(temperature) {
        this.setState({ scale: "c", temperature });
      }

      handleFahrenheitChange(temperature) {
        this.setState({ scale: "f", temperature });
      }

      render() {
        const scale = this.state.scale;
        const temperature = this.state.temperature;
        const celsius =
          scale === "f" ? tryConvert(temperature, toCelsius) : temperature;
        const fahrenheit =
          scale === "c" ? tryConvert(temperature, toFahrenheit) : temperature;

        return (
          <div>
            <TemperatureInput
              scale="c"
              temperature={celsius}
              onTemperatureChange={this.handleCelsiusChange}
            />
            <TemperatureInput
              scale="f"
              temperature={fahrenheit}
              onTemperatureChange={this.handleFahrenheitChange}
            />
            <BoilingVerdict celsius={parseFloat(celsius)} />
          </div>
        );
      }
    }
    function useSetLikes() {
      const [likes, setLikes] = React.useState(0);
      React.useEffect(() => {
        setLikes(likes);
      });
      return [likes, setLikes];
    }
    function Header(props) {
      const [likes, setLikes] = useSetLikes();

      return (
        <div>
          <h1>
            {`Develop. Preview. Ship. ðŸš€ ${props.title}`}
            {props.children}
          </h1>
          <button onClick={() => setLikes(likes + 1)}>Like{likes}</button>
        </div>
      );
    }
    let guest = 0;

    function Cup() {
      // Bad: changing a preexisting variable!
      guest = guest + 1;
      return <h2>Tea cup for guest #{guest}</h2>;
    }
    function Counter() {
      const [number, setNumber] = React.useState(0);

      return (
        <div>
          <h1>{number}</h1>
          <button
            onClick={() => {
              setNumber((number) => number + 1);
              setNumber((number) => number + 1);
              setNumber((number) => number + 1);
            }}
          >
            +3
          </button>
        </div>
      );
    }
    function delay(ms) {
      return new Promise((resolve) => {
        setTimeout(resolve, ms);
      });
    }
    function RequestTracker() {
      const [pending, setPending] = React.useState(0);
      const [completed, setCompleted] = React.useState(0);

      async function handleClick() {
        setPending((pending) => pending + 1);
        await delay(1000);
        setPending((pending) => pending - 1);
        setCompleted((completed) => completed + 1);
      }

      return (
        <div>
          <h3>Pending: {pending}</h3>
          <h3>Completed: {completed}</h3>
          <button onClick={handleClick}>Buy</button>
        </div>
      );
    }

    function HomePage(props) {
      const [likes, setLikes] = useSetLikes();
      const names = ["Ada Lovelace", "Grace Hopper", "Margaret Hamilton"];
      let a = 123;
      React.useEffect(() => {
        console.log(likes);
        console.log(12314);
        return () => {
          console.log(likes);
          document.title = `You clicked ${likes} times`;
        };
      }, [likes]);

      function handleClick() {
        console.log("increment like count");
        setLikes((likes) => {
          return ++likes;
        });
      }

      return (
        <div>
          <RequestTracker />
          <Counter />
          <Cup />
          <Cup />
          <Cup />
          <Header title={123}>
            <button>12314</button>
          </Header>
          {names.map((name) => {
            return <li key={name}>{name}</li>;
          })}
          <button onClick={handleClick}>Like{likes}</button>
          <Calculator />
        </div>
      );
    }

    const appReact = document.querySelector("#app-react");
    const root = ReactDOM.createRoot(appReact);
    root.render(<HomePage />);
  </script>
</html>

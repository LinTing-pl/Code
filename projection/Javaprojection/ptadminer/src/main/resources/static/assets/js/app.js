(function(e){function t(t){for(var r,l,i=t[0],n=t[1],u=t[2],c=0,m=[];c<i.length;c++)l=i[c],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&m.push(a[l][0]),a[l]=0;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);d&&d(t);while(m.length)m.shift()();return o.push.apply(o,u||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],r=!0,i=1;i<s.length;i++){var n=s[i];0!==a[n]&&(r=!1)}r&&(o.splice(t--,1),e=l(l.s=s[0]))}return e}var r={},a={app:0},o=[];function l(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.m=e,l.c=r,l.d=function(e,t,s){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(l.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(s,r,function(t){return e[t]}.bind(null,r));return s},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],n=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=n;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"32cf":function(e,t,s){"use strict";s("b116")},3443:function(e,t,s){"use strict";s("dfc4")},4529:function(e,t,s){"use strict";s("b74f")},"56d7":function(e,t,s){"use strict";s.r(t);var r=s("2b0e"),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},o=[],l={},i=l,n=(s("ce67"),s("2877")),u=Object(n["a"])(i,a,o,!1,null,null,null),d=u.exports,c=s("8c4f"),m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bgcbox"},[t("div",{staticClass:"logincss"},[t("el-form",{ref:"loginForm",staticClass:"demo-loginForm",attrs:{model:e.loginForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"name"}},[t("el-input",{model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("登录")]),t("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)])},p=[],f=s("bc3a"),h=s.n(f),g={data(){return{loginForm:{username:"admin",password:"123456"},rules:{username:[{required:!0,message:"用户名为必填项",trigger:"blur"},{min:3,max:6,message:"用户名长度在 3 到 6 个字符",trigger:"blur"}],password:[{required:!0,message:"密码为必填项",trigger:"blur"},{min:3,max:6,message:"密码长度在 3 到 6 个字符",trigger:"blur"}]}}},methods:{islogin(){h.a.post("/dev-api/login",this.loginForm).then(e=>{const{data:t,meta:s}=e.data;200===s.status?(localStorage.setItem("token",t.token),this.$router.push("/home")):this.$message({showClose:!0,message:s.msg,type:"error"})})},submitForm(){this.$refs.loginForm.validate(e=>{if(!e)return console.log("error submit!!"),!1;this.islogin()})},resetForm(){this.$refs.loginForm.resetFields()}}},b=g,v=(s("3443"),Object(n["a"])(b,m,p,!1,null,null,null)),w=v.exports,y=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"home"}},[t("Nav"),t("Main")],1)},_=[],k=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"main"}},[t("side-menu"),t("router-view")],1)},x=[],$=function(){var e=this,t=e._self._c;return t("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"/users",router:""}},[t("el-submenu",{attrs:{index:"1"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-location"}),t("span",[e._v("用户管理")])]),t("el-menu-item-group",e._l(e.navList.userList,(function(s,r){return t("el-menu-item",{key:r,attrs:{index:s.name}},[e._v(" "+e._s(s.navItem)+" ")])})),1)],2),t("el-submenu",{attrs:{index:"2"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-menu"}),t("span",[e._v("权限管理")])]),t("el-menu-item-group",e._l(e.navList.powerList,(function(s,r){return t("el-menu-item",{key:r,attrs:{index:s.name}},[e._v(" "+e._s(s.navItem)+" ")])})),1)],2)],1)},L=[],F={data(){return{navList:{userList:[{name:"/users",navItem:"用户列表"}],powerList:[{name:"/powers",navItem:"权限列表"},{name:"/powers",navItem:"角色列表"}]}}}},O=F,S=(s("4529"),Object(n["a"])(O,$,L,!1,null,"4373de3e",null)),j=S.exports,C={components:{SideMenu:j}},N=C,P=(s("b96b"),Object(n["a"])(N,k,x,!1,null,"1fc41caa",null)),W=P.exports,q=function(){var e=this;e._self._c;return e._m(0)},z=[function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"nav"}},[t("strong",[e._v("兼职小程序后台管理系统")])])}],I={},D=I,M=(s("32cf"),Object(n["a"])(D,q,z,!1,null,"b67c2d62",null)),T=M.exports,U={components:{Main:W,Nav:T}},A=U,E=(s("d613"),Object(n["a"])(A,y,_,!1,null,"31168e7d",null)),J=E.exports,K=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"routerv"}},[t("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchdata},slot:"append"})],1)],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.adduserdialog=!0}}},[e._v("添加用户")])],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.usersdata,stripe:""}},[t("el-table-column",{attrs:{prop:"username",label:"姓名",width:"180"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"180"}}),t("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),t("el-table-column",{attrs:{label:"用户状态",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-switch",{on:{change:function(t){return e.changestate(s.row.id,s.row.mg_state)}},model:{value:s.row.mg_state,callback:function(t){e.$set(s.row,"mg_state",t)},expression:"scope.row.mg_state"}})]}}])}),t("el-table-column",{attrs:{label:"操作",prop:"address"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:"mini"},on:{click:function(t){return e.openupdate(s.row)}}}),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",plain:"",size:"mini"},on:{click:function(t){return e.deleteuser(s.row.id)}}}),t("el-button",{attrs:{type:"success",size:"mini"}},[e._v("角色管理")])]}}])})],1),t("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pagesize,"current-page":e.curpage},on:{"update:currentPage":function(t){e.curpage=t},"update:current-page":function(t){e.curpage=t},"current-change":e.changecur}}),t("el-dialog",{attrs:{title:"添加",visible:e.adduserdialog},on:{"update:visible":function(t){e.adduserdialog=t},close:e.clearuseradd}},[t("el-form",{ref:"addform",attrs:{model:e.adduserform,rules:e.addrules}},[t("el-form-item",{attrs:{prop:"username",label:"用户名","label-width":e.formLabelWidth}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.adduserform.username,callback:function(t){e.$set(e.adduserform,"username",t)},expression:"adduserform.username"}})],1),t("el-form-item",{attrs:{prop:"password",label:"密码","label-width":e.formLabelWidth}},[t("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.adduserform.password,callback:function(t){e.$set(e.adduserform,"password",t)},expression:"adduserform.password"}})],1),t("el-form-item",{attrs:{prop:"email",label:"邮箱","label-width":e.formLabelWidth}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.adduserform.email,callback:function(t){e.$set(e.adduserform,"email",t)},expression:"adduserform.email"}})],1),t("el-form-item",{attrs:{prop:"mobile",label:"手机","label-width":e.formLabelWidth}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.adduserform.mobile,callback:function(t){e.$set(e.adduserform,"mobile",t)},expression:"adduserform.mobile"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.adduserdialog=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"编辑",visible:e.updateuserdialog},on:{"update:visible":function(t){e.updateuserdialog=t},close:e.closeupdate}},[t("el-form",{ref:"updateform",attrs:{model:e.updateuserform,rules:e.updateuserrules}},[t("el-form-item",{attrs:{prop:"username",label:"用户名","label-width":e.formLabelWidth}},[t("el-input",{attrs:{value:e.updateuserform.username,"auto-complete":"off",disabled:""}})],1),t("el-form-item",{attrs:{prop:"email",label:"邮箱","label-width":e.formLabelWidth}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.updateuserform.email,callback:function(t){e.$set(e.updateuserform,"email",t)},expression:"updateuserform.email"}})],1),t("el-form-item",{attrs:{prop:"mobile",label:"手机","label-width":e.formLabelWidth}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.updateuserform.mobile,callback:function(t){e.$set(e.updateuserform,"mobile",t)},expression:"updateuserform.mobile"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.updateuserdialog=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("确 定")])],1)],1)],1)},R=[],B={data(){return{usersdata:[],curpage:1,pagesize:3,total:0,search:"",adduserdialog:!1,updateuserdialog:!1,adduserform:{username:"",password:"",email:"",mobile:""},formLabelWidth:"120px",addrules:{username:[{required:!0,message:"用户名为必填项",trigger:"blur"},{min:3,max:6,message:"用户名长度在 3 到 6 个字符",trigger:"blur"}],password:[{required:!0,message:"密码为必填项",trigger:"blur"},{min:3,max:6,message:"密码长度在 3 到 6 个字符",trigger:"blur"}]},updateuserform:{username:"",email:"",mobile:"",id:""},updateuserrules:{}}},mounted(){this.getdata()},methods:{getdata(e=1){this.$http.get("/users",{params:{pagenum:e,pagesize:3,query:this.search||""}}).then(e=>{console.log(e);const{data:t,meta:s}=e.data;200===s.status&&(this.usersdata=t.users,this.total=t.total)})},changecur(e){console.log(e),this.getdata(e)},searchdata(){this.curpage=1,this.getdata()},changestate(e,t){console.log(e,t),this.$http.put(`/users/${e}/state/${t}`).then(e=>{console.log(e);const{data:t,meta:s}=e.data;200===s.status&&(this.$message({message:s.msg,type:"success"}),console.log(t))})},addUser(){this.$refs.addform.validate(e=>{if(!e)return console.log("提交失败"),!1;this.$http.post("/users",this.adduserform).then(e=>{console.log(e);const{data:t,meta:s}=e.data;201===s.status?(this.$message({message:s.msg,type:"success"}),this.adduserdialog=!1,this.getdata(),console.log(t)):this.$message.error(s.msg)})})},clearuseradd(){this.$refs.addform.resetFields()},deleteuser(e){this.$confirm("是否删除该用户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$http.delete("users/"+e).then(e=>{console.log(e)}),this.getdata(),this.curpage=1,this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},openupdate(e){this.updateuserdialog=!0,this.updateuserform=e},updateUser(){const e=this.updateuserform.id;this.$http.put("/users/"+e,{email:this.updateuserform.email,mobile:this.updateuserform.mobile}).then(e=>{const{data:t,meta:s}=e.data;200===s.status&&(console.log(t),this.$message({message:s.msg,type:"success"})),this.updateuserdialog=!1,this.getdata(),this.curpage=1})},closeupdate(){this.$refs.updateform.resetFields()}}},H=B,G=(s("868f"),Object(n["a"])(H,K,R,!1,null,"cbdd402e",null)),Q=G.exports,V=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolesList,stripe:""}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},e._l(s.row.children,(function(s){return t("el-row",{key:s.id},[t("el-col",{attrs:{span:4}},[e._v(e._s(s.authName))]),t("el-col",{attrs:{span:20}},e._l(s.children,(function(s){return t("el-row",{key:s.id},[t("el-col",{attrs:{span:4}},[e._v(e._s(s.authName))]),t("el-col",{attrs:{span:20}},e._l(s.children,(function(s){return t("span",{key:s.id},[e._v(" "+e._s(s.authName)+" ")])})),0)],1)})),1)],1)})),1)]}}])}),t("el-table-column",{attrs:{type:"index",label:"#",width:"50"}}),t("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"180"}}),t("el-table-column",{attrs:{prop:"roleDesc",label:"描述",width:"180"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:"mini"},on:{click:function(t){return e.openrolesupdate(s.row)}}}),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",plain:"",size:"mini"},on:{click:function(t){return e.deleteroles(s.row.id)}}}),t("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.opensetroles(s.row.children,s.row.id)}}},[e._v("权限管理")])]}}])})],1),t("el-dialog",{attrs:{title:"编辑",visible:e.updaterolesdialog},on:{"update:visible":function(t){e.updaterolesdialog=t},close:e.closeupdate}},[t("el-form",{ref:"rolesform",model:{value:e.updaterolesform,callback:function(t){e.updaterolesform=t},expression:"updaterolesform"}},[t("el-form-item",{attrs:{prop:"roleName",label:"用户名","label-width":e.formLabelWidth}},[t("el-input",{attrs:{value:e.updaterolesform.roleName,"auto-complete":"off"}})],1),t("el-form-item",{attrs:{prop:"roleDesc",label:"角色描述","label-width":e.formLabelWidth}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.updaterolesform.roleDesc,callback:function(t){e.$set(e.updaterolesform,"roleDesc",t)},expression:"updaterolesform.roleDesc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.updaterolesdialog=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateRoles}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"权限管理",visible:e.rolesdialog},on:{"update:visible":function(t){e.rolesdialog=t}}},[t("el-tree",{ref:"allroles",attrs:{data:e.allrolesList,"show-checkbox":"","default-expand-all":!0,"node-key":"id","highlight-current":"",props:e.defaultProps}}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.rolesdialog=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.putallroles}},[e._v("确 定")])],1)],1)],1)},X=[],Y={data(){return{rolesList:[],updaterolesdialog:!1,formLabelWidth:"120px",updaterolesform:[],rolesdialog:!1,allrolesList:[],defaultProps:{children:"children",label:"authName"},rid:""}},mounted(){this.getrolesdata(),this.getallrolestree()},methods:{getrolesdata(){this.$http.get("/roles").then(e=>{const{data:t,meta:s}=e.data;200===s.status&&(this.rolesList=t,console.log(this.rolesList[0].children))})},openrolesupdate(e){console.log(e),this.updaterolesdialog=!0,this.updaterolesform=e},deleteroles(e){this.$http.delete("/roles/"+e).then(e=>{const t=e.data.meta;200===t.status?(this.getrolesdata(),this.$message({message:t.msg,type:"success"})):this.$message.error(t.msg)})},closeupdate(){this.$refs.rolesform.resetFields()},updateRoles(){const e=this.updaterolesform.id;this.$http.put("/roles/"+e,{roleName:this.updaterolesform.roleName,roleDesc:this.updaterolesform.roleDesc}).then(e=>{console.log(e);const{data:t,meta:s}=e.data;200===s.status&&(this.updaterolesdialog=!1,this.getrolesdata(),this.$message({message:"修改成功",type:"success"}),console.log(t))})},opensetroles(e,t){this.rolesdialog=!0,this.rid=t,this.$nextTick(()=>{const t=[];e.forEach(e=>{e.children.forEach(e=>{e.children.forEach(e=>{t.push(e.id)})})}),this.$refs.allroles.setCheckedKeys(t)})},getallrolestree(){this.$http.get("/rights/tree").then(e=>{console.log(e);const{data:t,meta:s}=e.data;200===s.status&&(this.allrolesList=t)})},putallroles(){const e=this.$refs.allroles.getCheckedKeys(),t=this.$refs.allroles.getHalfCheckedKeys(),s=[...e,...t];console.log(s);const r=this.rid;this.$http.post(`/roles/${r}/rights`,{rids:s.join(",")}).then(()=>{this.rolesdialog=!1,this.getrolesdata()})}}},Z=Y,ee=Object(n["a"])(Z,V,X,!1,null,null,null),te=ee.exports;r["default"].use(c["a"]);const se=[{path:"/",name:"Login",component:w},{path:"/home",name:"Home",component:J,redirect:"/users",meta:{requireAuth:!0},children:[{path:"/users",name:"Users",component:Q,meta:{requireAuth:!0}},{path:"/powers",name:"Powers",component:te,meta:{requireAuth:!0}}]}],re=new c["a"]({mode:"history",routes:se});var ae=re,oe=s("2f62");r["default"].use(oe["a"]);var le=new oe["a"].Store({state:{},mutations:{},state:{user:{username:null==window.localStorage.getItem("user")?"":JSON.parse(window.localStorage.getItem("user")).username}},mutations:{login(e,t){e.user=t,window.localStorage.setItem("user",JSON.stringify(t))}},actions:{},modules:{}}),ie=s("5c96"),ne=s.n(ie),ue=(s("0fae"),s("bc3a"));ue.defaults.baseURL="http://localhost:8888",r["default"].prototype.$axios=ue,r["default"].use(ne.a),r["default"].config.productionTip=!1,ae.beforeEach((e,t,s)=>{e.meta.requireAuth?le.state.user.username?s():s({path:"/login",query:{redirect:e.fullPath}}):s()}),new r["default"]({router:ae,store:le,render:e=>e(d)}).$mount("#app")},"868f":function(e,t,s){"use strict";s("b12e")},a45a:function(e,t,s){},b116:function(e,t,s){},b12e:function(e,t,s){},b74f:function(e,t,s){},b96b:function(e,t,s){"use strict";s("fedb")},ce67:function(e,t,s){"use strict";s("f837")},d613:function(e,t,s){"use strict";s("a45a")},dfc4:function(e,t,s){},f837:function(e,t,s){},fedb:function(e,t,s){}});